<%
  python_file = File.join(BUDDING_ROOT, "lib", "oo2doc.py")
  arguments = []
  %w[title short_summary teaser story locations people companies keywords].each do |section|
    arguments << "--#{section}=\"#{@document.send(section)}\""
  end
  arguments << "--language=\"#{@document.language.name}\""
  file = %x(python #{python_file} #{arguments.join(" ")})
  begin
    doc = File.read(file)
    File.delete(file)
  rescue Errno::ENOENT
    # TODO: Handle better the exception
    raise NameError, "No file found."
  end
  doc
%>